#! /bin/bash
#
# Check the RADX build
# ======================
#
# By default the libraries and applications will be installed in:
#
#   /usr/local/include
#   /usr/local/lib
#   /usr/local/bin

#--------------------------------------------------------------------
# usage function
#

function usage() {
    echo
    echo "Usage: check_build [ -h ] [ prefix ]"
    echo
    echo "  -h: produce this usage list"
    echo "  optionally set the prefix"
    echo
}

# set the path

export PATH=.:/bin:/usr/bin:/sbin:/usr/sbin:/usr/bin/X11:/usr/local/bin:/usr/local/sbin

# set the install prefix

prefix=/usr/local

if [ $# -gt 0 ]
then
  if [ "$1" == -h -o "$2" == -h ] 
  then
    usage
    exit 0
  fi
  prefix=$1
fi

echo "Using prefix: $prefix"

# Checking the build
# ------------------

echo
echo "============= Checking libs for RADX - ============="
./distribs/radx/check_libs -p $prefix || exit 1
echo "===================================================="
echo
echo "============= checking apps for RADX ============="
./distribs/radx/check_apps -p $prefix || exit 1
echo "=================================================="
